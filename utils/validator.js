// ==========================================
// ğŸ•’ [ì‹œê°„ ê²€ì¦ í•¨ìˆ˜] ì‹ ì²­/ì·¨ì†Œ ê°€ëŠ¥ ì—¬ë¶€ íŒë…ê¸°
// ==========================================
function checkTimeParams(targetDay, category) {
    const now = new Date();
    const day = now.getDay(); // 0(ì¼) ~ 6(í† )
    const hour = now.getHours();

    // 1. í† ìš”ì¼ 22ì‹œ ì´ì „(00:00 ~ 21:59)ì€ ë¬´ì¡°ê±´ "ê¸ˆì§€ êµ¬ì—­" (ì˜¤í”ˆ ì „)
    // (ë‹¨, í† ìš”ì¼ì´ë¼ë„ ê¸ˆìš”ì¼ ê²ŒìŠ¤íŠ¸ ë§ˆê° ì§í›„ì¸ 00ì‹œ~21ì‹œ59ë¶„ì€ ë‹«í˜€ìˆì–´ì•¼ í•¨)
    if (day === 6 && hour < 22) {
        return { valid: false, msg: "ì§€ê¸ˆì€ íˆ¬í‘œ ì‹œê°„ì´ ì•„ë‹™ë‹ˆë‹¤. (í† ìš”ì¼ 22ì‹œ ì˜¤í”ˆ)" };
    }

    // 2. ìš”ì¼ë³„/ì¹´í…Œê³ ë¦¬ë³„ ë§ˆê° ì‹œê°„ ì²´í¬
    // ìš°ë¦¬ê°€ ë§‰ì•„ì•¼ í•  'ê¸ˆì§€ ìš”ì¼'ì„ ì •ì˜í•©ë‹ˆë‹¤.
    
    if (targetDay === 'WED') {
        if (category === 'guest') {
            // [ìˆ˜ìš”ì¼ ê²ŒìŠ¤íŠ¸]: ìˆ˜ 24ì‹œ(ëª© 00ì‹œ) ë§ˆê°
            // -> ëª©(4), ê¸ˆ(5) ì´ë©´ ì‹ ì²­ ë¶ˆê°€
            if (day === 4 || day === 5) return { valid: false, msg: "ìˆ˜ìš”ì¼ ê²ŒìŠ¤íŠ¸ ì‹ ì²­ì´ ë§ˆê°ë˜ì—ˆìŠµë‹ˆë‹¤." };
        } else {
            // [ìˆ˜ìš”ì¼ ì¼ë°˜]: í™” 24ì‹œ(ìˆ˜ 00ì‹œ) ë§ˆê°
            // -> ìˆ˜(3), ëª©(4), ê¸ˆ(5) ì´ë©´ ì‹ ì²­ ë¶ˆê°€
            if (day === 3 || day === 4 || day === 5) return { valid: false, msg: "ìˆ˜ìš”ì¼ íˆ¬í‘œê°€ ë§ˆê°ë˜ì—ˆìŠµë‹ˆë‹¤." };
        }
    } 
    else if (targetDay === 'FRI') {
        if (category === 'guest') {
            // [ê¸ˆìš”ì¼ ê²ŒìŠ¤íŠ¸]: ê¸ˆ 24ì‹œ(í†  00ì‹œ) ë§ˆê°
            // -> ì´ë¯¸ ìœ„ì—ì„œ 'í† ìš”ì¼ 22ì‹œ ì „'ì„ ë§‰ì•˜ìœ¼ë¯€ë¡œ ì¶”ê°€ ì²´í¬ ë¶ˆí•„ìš”!
            // (ê¸ˆìš”ì¼ 23:59ê¹Œì§€ í†µê³¼, í† ìš”ì¼ 00:00ë¶€í„°ëŠ” ìœ„ 1ë²ˆ ì¡°ê±´ì— ê±¸ë¦¼)
            // í†µê³¼!
        } else {
            // [ê¸ˆìš”ì¼ ì¼ë°˜]: ëª© 24ì‹œ(ê¸ˆ 00ì‹œ) ë§ˆê°
            // -> ê¸ˆ(5) ì´ë©´ ì‹ ì²­ ë¶ˆê°€
            if (day === 5) return { valid: false, msg: "ê¸ˆìš”ì¼ íˆ¬í‘œê°€ ë§ˆê°ë˜ì—ˆìŠµë‹ˆë‹¤." };
        }
    }

    return { valid: true };
}

module.exports = { checkTimeParams }; 